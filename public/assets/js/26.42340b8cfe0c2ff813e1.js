webpackJsonp([26],{1852:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(724),r=o.n(a);for(var i in a)["default","default"].indexOf(i)<0&&function(e){o.d(t,e,function(){return a[e]})}(i);var s=o(1853),l=o(39)(r.a,s.a,!1,null,null,null);t.default=l.exports},1853:function(e,t,o){"use strict";var a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-field",{ref:"field",attrs:{"label-for":e.name,label:Boolean(e.typeText)?e.labelText:null,type:Boolean(e.error||e.localError)?"is-danger":e.fieldType,message:[e.error,e.localError],expanded:e.expanded}},[o("b-autocomplete",{ref:"autocomplete",attrs:{id:e.name,name:e.name,data:e.data,placeholder:e.placeholder,field:e.field,"max-results":e.maxResults,"keep-first":!0,loading:e.isLoading,icon:e.disabled||e.readonly?"":"magnify","icon-pack":e.iconPack,required:e.required,minlength:e.minlength,maxlength:e.maxlength,readonly:e.readonly,disabled:e.disabled,"has-counter":!1,min:e.min,max:e.max,size:e.size,autocomplete:"off"},on:{input:e.input,select:e.select,blur:e.blur},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"media"},[o("div",{staticClass:"media-content"},[o("span",{staticClass:"title is-6"},[e.subtitle?o("span",[e._v(e._s(e._f("upperCase")(e.fieldLabel))+": ")]):e._e(),e._v("\n\t\t\t\t\t\t"+e._s(t.option[e.field])+"\n\t\t\t\t\t")]),e._v(" "),e.subtitle?o("span",{staticClass:"subtitle is-6"},[o("br"),e._v(e._s(e._f("upperCase")(e.subtitleLabel))+": "+e._s(t.option[e.subtitle])+"\n\t\t\t\t\t")]):e._e()])])]}}]),model:{value:e.typeText,callback:function(t){e.typeText=t},expression:"typeText"}})],1)},staticRenderFns:[]};t.a=a},1921:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(o(95)),r=s(o(1852)),i=o(40);function s(e){return e&&e.__esModule?e:{default:e}}t.default={components:{InputAutocomplete:r.default},data:function(){return{form:new Form({id:null,idSituacao:null,classe:"",valorCusto:0,valorVenda:0,cliente:null,tecnico:null,imei:null,iccid:null,telefone:null,operadora:{id:null,descricao:null},numero:null,marcaEquipamento:{id:null,descricao:null},modeloEquipamento:{id:null,descricao:null}})}},computed:(0,a.default)({},(0,i.mapGetters)(["dadosUsuario","isUsuarioMatrizFilial"]),{idMarcaEquipamento:function(){return this.form.marcaEquipamento.id||""},urlAutocompleteCliente:function(){return"/cliente/findLike"},urlAutocompleteTecnico:function(){return"/tecnico/findLike"}}),methods:{marcaEquipamentoChanged:function(){this.form.modeloEquipamento={id:null,descricao:null}},setCliente:function(e){e&&parseInt(e.id)>0&&(this.form.cliente=e)},setTecnico:function(e){e&&parseInt(e.id)>0&&(this.form.tecnico=e)},onSubmit:function(){var e=this;this.form.post("/estoque/salvar").then(function(t){t.message&&(e.$toast.open({message:t.message?t.message:"Cadastro salvo com sucesso.",type:"is-success",position:"is-top",duration:5e3}),e.$router.push("/lista-estoque"))}).catch(function(t){t.message&&e.$toast.open({message:t.message?t.message:"Erro ao salvar cadastro.",type:"is-warning",position:"is-top",duration:7e3})})},setFormData:function(e,t){if(t)t.response.data.message&&this.$toast.open({message:t.response.data.message?t.response.data.message:"Erro ao consultar cadastro.",type:"is-warning",position:"is-top",duration:5e3});else{for(var o in this.form.reset(),this.form.data())this.form[o]=e.data[o];null==this.form.operadora&&(this.form.operadora={id:null,descricao:null}),null==this.form.marcaEquipamento&&(this.form.marcaEquipamento={id:null,descricao:null}),null==this.form.modeloEquipamento&&(this.form.modeloEquipamento={id:null,descricao:null})}}},beforeRouteEnter:function(e,t,o){var a=void 0;e.params.id?a=e.params.id:"function"==typeof e.meta.id&&(a=e.meta.id()),a?Vue.axios.get("/estoque/findId/"+a).then(function(e){o(function(t){t.setFormData(e,null)})}).catch(function(e){o(function(t){t.setFormData(null,e)})}):o(function(e){e.form.reset(),"tbcliente"==e.dadosUsuario.classe&&(e.form.cliente={id:e.dadosUsuario.idObjeto})})},beforeRouteUpdate:function(e,t,o){var a=this;this.form.reset();var r=void 0;e.params.id?r=e.params.id:"function"==typeof e.meta.id&&(r=e.meta.id()),r?this.axios.get("/estoque/findId/"+r).then(function(e){a.setFormData(e,null),o()}).catch(function(e){a.setFormData(null,e),o()}):(o(),"tbcliente"==this.dadosUsuario.classe&&(this.form.cliente={id:this.dadosUsuario.idObjeto}))}},e.exports=t.default},1970:function(e,t,o){"use strict";var a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"columns is-centered"},[o("div",{staticClass:"column"},[o("h1",{staticClass:"title is-clearfix"},[e._v("Cadastro de estoque")]),e._v(" "),o("b-message",{attrs:{closable:!1}},[o("form",{attrs:{name:"cadastroEstoqueForm",method:"post",action:"#"},on:{submit:function(t){t.preventDefault(),e.onSubmit(t)},keydown:function(t){e.form.errors.clear(t.target.name)},change:function(t){e.form.errors.clear(t.target.name)}}},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half-desktop"},[o("select-ajax",{attrs:{name:"classe",size:"is-medium",placeholder:"Tipo de item","control-type":"is-primary","has-error":e.form.errors.has("classe"),error:e.form.errors.get("classe")},on:{errorSelectAjax:function(t){e.form.setSelectError("classe",t)}},model:{value:e.form.classe,callback:function(t){e.$set(e.form,"classe",t)},expression:"form.classe"}},[o("option",{attrs:{value:"",disabled:""}},[e._v("Tipo de Item")]),e._v(" "),o("option",{attrs:{value:"chip"}},[e._v("Chip")]),e._v(" "),o("option",{attrs:{value:"equipamento"}},[e._v("Equipamento")])]),e._v(" "),e.isUsuarioMatrizFilial?o("input-autocomplete",{ref:"autocompleteCliente",attrs:{label:"Cliente",placeholder:"Buscar cliente",name:"cliente",size:"is-medium",url:e.urlAutocompleteCliente,param:"","init-value":e.form.cliente?e.form.cliente.nome:null,field:"nome",subtitle:"cpf","field-label":"Nome","subtitle-label":"CPF/CNPJ",minlength:2},on:{selected:e.setCliente}}):e._e()],1),e._v(" "),o("div",{staticClass:"column is-half-desktop"},[e.form.id>0?o("select-ajax",{attrs:{name:"idSituacao",size:"is-medium",placeholder:"Situação","api-route":"/estoque/listarSituacoes","control-type":"is-primary","has-error":e.form.errors.has("idSituacao"),error:e.form.errors.get("idSituacao")},on:{errorSelectAjax:function(t){e.form.setSelectError("idSituacao",t)}},model:{value:e.form.idSituacao,callback:function(t){e.$set(e.form,"idSituacao",t)},expression:"form.idSituacao"}}):e._e(),e._v(" "),e.isUsuarioMatrizFilial?o("input-autocomplete",{ref:"autocompleteTecnico",attrs:{label:"Técnico",placeholder:"Buscar técnico",name:"tecnico",size:"is-medium",url:e.urlAutocompleteTecnico,param:"","init-value":e.form.tecnico?e.form.tecnico.nome:null,field:"nome",subtitle:"cpf","field-label":"Nome","subtitle-label":"CPF",minlength:2},on:{selected:e.setTecnico}}):e._e()],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:Boolean(e.form.classe)&&!Boolean(e.form.cliente),expression:"Boolean(form.classe) && !Boolean(form.cliente)"}],staticClass:"columns"},[o("div",{staticClass:"column is-half-desktop"},[o("input-text",{attrs:{name:"valorCusto",size:"is-medium",placeholder:"Valor de custo","is-money":!0,"has-error":e.form.errors.has("valorCusto"),error:e.form.errors.get("valorCusto")},model:{value:e.form.valorCusto,callback:function(t){e.$set(e.form,"valorCusto",t)},expression:"form.valorCusto"}})],1),e._v(" "),o("div",{staticClass:"column is-half-desktop"},[o("input-text",{attrs:{name:"valorVenda",size:"is-medium",placeholder:"Valor de venda","is-money":!0,"has-error":e.form.errors.has("valorVenda"),error:e.form.errors.get("valorVenda")},model:{value:e.form.valorVenda,callback:function(t){e.$set(e.form,"valorVenda",t)},expression:"form.valorVenda"}})],1)]),e._v(" "),"chip"==e.form.classe?o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half-desktop"},[o("input-text",{attrs:{name:"imei",type:"tel",size:"is-medium",placeholder:"IMEI",mask:"######-##-######-#",masked:!1,"has-error":e.form.errors.has("imei"),error:e.form.errors.get("imei")},model:{value:e.form.imei,callback:function(t){e.$set(e.form,"imei",t)},expression:"form.imei"}}),e._v(" "),o("input-text",{attrs:{name:"iccid",type:"tel",size:"is-medium",placeholder:"ICCID",mask:"#### #### #### #### ## #",masked:!1,"has-error":e.form.errors.has("iccid"),error:e.form.errors.get("iccid")},model:{value:e.form.iccid,callback:function(t){e.$set(e.form,"iccid",t)},expression:"form.iccid"}})],1),e._v(" "),o("div",{staticClass:"column is-half-desktop"},[o("input-text",{attrs:{name:"telefone",type:"tel",size:"is-medium",placeholder:"Telefone",mask:["# ## ####-####","# ## #####-####"],masked:!1,"has-error":e.form.errors.has("telefone"),error:e.form.errors.get("telefone")},model:{value:e.form.telefone,callback:function(t){e.$set(e.form,"telefone",t)},expression:"form.telefone"}}),e._v(" "),o("select-ajax",{ref:"selectOperadora",attrs:{name:"operadora",size:"is-medium",placeholder:"Operadora","api-route":"/operadora/listar","control-type":"is-primary","has-error":e.form.errors.has("operadora"),error:e.form.errors.get("operadora")},on:{errorSelectAjax:function(t){e.form.setSelectError("operadora",t)}},model:{value:e.form.operadora.id,callback:function(t){e.$set(e.form.operadora,"id",t)},expression:"form.operadora.id"}})],1)]):e._e(),e._v(" "),"equipamento"==e.form.classe?o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half-desktop"},[o("input-text",{attrs:{name:"numero",type:"tel",size:"is-medium",placeholder:"Número","has-error":e.form.errors.has("numero"),error:e.form.errors.get("numero")},model:{value:e.form.numero,callback:function(t){e.$set(e.form,"numero",t)},expression:"form.numero"}}),e._v(" "),o("input-text",{attrs:{name:"imei",type:"tel",size:"is-medium",placeholder:"IMEI",mask:"######-##-######-#",masked:!1,"has-error":e.form.errors.has("imei"),error:e.form.errors.get("imei")},model:{value:e.form.imei,callback:function(t){e.$set(e.form,"imei",t)},expression:"form.imei"}})],1),e._v(" "),o("div",{staticClass:"column is-half-desktop"},[o("select-ajax",{attrs:{name:"marcaEquipamento",size:"is-medium",placeholder:"Marca do equipamento","api-route":"/marcaModeloEquipamento/listarMarca","control-type":"is-primary",changed:e.marcaEquipamentoChanged,"has-error":e.form.errors.has("marcaEquipamento"),error:e.form.errors.get("marcaEquipamento")},on:{errorSelectAjax:function(t){e.form.setSelectError("marcaEquipamento",t)}},model:{value:e.form.marcaEquipamento.id,callback:function(t){e.$set(e.form.marcaEquipamento,"id",t)},expression:"form.marcaEquipamento.id"}}),e._v(" "),o("select-ajax",{attrs:{name:"modeloEquipamento",size:"is-medium",placeholder:"Modelo do equipamento","api-route":"/marcaModeloEquipamento/listarModelo/",params:e.idMarcaEquipamento,"control-type":"is-primary","has-error":e.form.errors.has("modeloEquipamento"),error:e.form.errors.get("modeloEquipamento")},on:{errorSelectAjax:function(t){e.form.setSelectError("modeloEquipamento",t)}},model:{value:e.form.modeloEquipamento.id,callback:function(t){e.$set(e.form.modeloEquipamento,"id",t)},expression:"form.modeloEquipamento.id"}})],1)]):e._e(),e._v(" "),o("div",{staticClass:"field has-addons has-addons-right"},[o("div",{staticClass:"control"},[o("button",{staticClass:"button is-primary is-medium",class:{"is-loading":e.form.isLoading},attrs:{type:"button"},on:{click:e.onSubmit,dblclick:function(e){e.preventDefault()}}},[e._v("\n\t\t\t\t\t\t\tSalvar\n\t\t\t\t\t\t")])])])])])],1)])},staticRenderFns:[]};t.a=a},567:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(1921),r=o.n(a);for(var i in a)["default","default"].indexOf(i)<0&&function(e){o.d(t,e,function(){return a[e]})}(i);var s=o(1970),l=o(39)(r.a,s.a,!1,null,null,null);t.default=l.exports},724:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(o(149)),r=i(o(94));function i(e){return e&&e.__esModule?e:{default:e}}t.default={name:"input-autocomplete",mixins:[a.default,r.default],props:{initValue:{type:String,default:""},field:{type:String,required:!0},subtitle:String,fieldLabel:String,subtitleLabel:String,maxResults:{type:Number,default:50},url:{type:String,required:!0},param:{type:String,default:""},customParams:Object},data:function(){return{typeText:this.initValue,selected:null,data:[],isLoading:!1,localError:null}},computed:{labelText:function(){return this.label?this.label:this.placeholder}},watch:{initValue:function(e){this.typeText=e,this.data=[]},error:function(e,t){var o=this;Boolean(e)||e==t||this.$nextTick(function(){o.$refs.autocomplete.$el.querySelector("input").focus()})}},methods:{input:_.debounce(function(){var e=this;this.readonly||this.disabled||this.$nextTick(function(){!e.typeText||e.selected&&e.typeText==e.selected[e.field]||e.initValue==e.typeText||e.getData(e.typeText)})},1e3),select:function(e){this.readonly||this.disabled||(this.selected=e,this.data=[],this.$emit("selected",e),this.getName(this.name))},blur:function(e){this.typeText==this.initValue||this.selected||0!=this.data.length||(this.typeText="",this.localError=null)},getData:_.debounce(function(e){var t=this;this.localError=null,this.data=[],this.minlength&&e.length<this.minlength||null!=this.url&&e.length>0&&(this.isLoading=!0,Vue.axios.get(this.url+"/"+e).then(function(e){e.data.forEach(function(e){return t.data.push(e)}),t.isLoading=!1,e.data&&0!=e.data.length||(t.localError="Nada foi encontrado.")}).catch(function(e){e.response.data&&e.response.data.message?t.localError=e.response.data.message:t.localError="Ocorreu um erro ao tentar fazer a busca.",t.isLoading=!1,t.showList=!1}))},0)},mounted:function(){(this.data=[],this.disabled||this.readonly)||(this.typeText="",this.$refs.autocomplete.$el.querySelector("input").blur())}},e.exports=t.default}});