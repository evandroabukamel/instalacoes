webpackJsonp([29],{1863:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(62)),o=s(a(236));function s(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{dropFiles:[],inputName:"agendamentoFotos[]",loading:!1,uploadedFiles:[],uploadError:null}},props:{idAgendamento:null},methods:{onFilesChange:function(e){var t=this,a=new FormData;e.length&&((0,o.default)(Array(e.length).keys()).map(function(n){a.append(t.inputName,e[n],e[n].name)}),a.append("id",this.idAgendamento),this.dropFiles=[],this.save(a))},save:function(e){var t=this;this.loading=!0,this.upload(e).then(function(e){e&&t.$toast.open({message:e.message?e.message:"Foto(s) salva(s) com sucesso.",type:"is-success",position:"is-top",duration:5e3}),e.idFoto&&_.forEach(e.idFoto,function(e){t.$emit("sent",{id:e,endereco:null})})}).catch(function(e){e&&t.$toast.open({message:e.message?e.message:"Erro ao salvar foto.",type:"is-danger",position:"is-top",duration:5e3})})},upload:function(e){var t=this;return new n.default(function(a,n){t.axios.post("/agendamento/enviarFoto",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t.loading=!1,a(e.data)}).catch(function(e){t.loading=!1,n(e.response.data)})})}}},e.exports=t.default},1896:function(e,t,a){"use strict";var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{name:"formAgendamentoFotoUpload",enctype:"multipart/form-data",novalidate:""}},[a("b-upload",{attrs:{name:e.inputName,accept:"image/*",multiple:"","drag-drop":"",loading:e.loading,type:"is-black"},on:{input:e.onFilesChange},model:{value:e.dropFiles,callback:function(t){e.dropFiles=t},expression:"dropFiles"}},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),e._v(" "),a("p",[e._v("Arraste para c√° suas fotos ou clique aqui para enviar")])])])])],1)},staticRenderFns:[]};t.a=n},551:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1863),o=a.n(n);for(var s in n)["default","default"].indexOf(s)<0&&function(e){a.d(t,e,function(){return n[e]})}(s);var i=a(1896),r=a(39)(o.a,i.a,!1,null,null,null);t.default=r.exports}});